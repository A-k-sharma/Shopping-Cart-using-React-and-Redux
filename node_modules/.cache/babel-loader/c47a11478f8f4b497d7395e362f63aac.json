{"ast":null,"code":"import _objectSpread from \"/home/ttn/Documents/shopping-cart-using-redux/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/ttn/Documents/shopping-cart-using-redux/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport products from \"../../data\";\nimport { ADD_TO_CART } from \"../action/cartAction\";\nvar initstate = {\n  items: products,\n  addedItems: [],\n  total: 0\n};\n\nvar cartReducer = function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initstate;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"ADD_TO_CART\":\n      {\n        //console.log(addedItem)\n        var index = state.addedItems.findIndex(function (item) {\n          return action.id === item.id;\n        });\n\n        var _products = _toConsumableArray(state.items);\n\n        var prodIndex = _products.findIndex(function (item) {\n          return action.id === item.id;\n        });\n\n        _products[prodIndex].quantity -= 1;\n\n        if (index !== -1) {\n          var addedItemList = _toConsumableArray(state.addedItems);\n\n          var addedItem = addedItemList[index];\n          addedItem.quantity += 1;\n          return _objectSpread({}, state, {\n            items: _products,\n            addedItems: addedItemList,\n            total: state.total + addedItem.price\n          });\n        } else {\n          var newItemIndex = state.items.findIndex(function (item) {\n            return item.id === action.id;\n          });\n\n          if (newItemIndex !== -1) {\n            var newItem = _objectSpread({}, state.items[newItemIndex]);\n\n            newItem.quantity = 1;\n            return _objectSpread({}, state, {\n              items: _products,\n              addedItems: [].concat(_toConsumableArray(state.addedItems), [newItem]),\n              total: state.total + newItem.price\n            });\n          }\n\n          return _objectSpread({}, state);\n        }\n      }\n    //Cart\n\n    case \"REMOVE_ITEM\":\n      {\n        var itemToRemove = state.addedItems.find(function (item) {\n          return action.id === item.id;\n        });\n        var new_items = state.addedItems.filter(function (item) {\n          return action.id !== item.id;\n        }); //calculating the total\n\n        var newTotal = state.total - itemToRemove.price * itemToRemove.quantity;\n        console.log(itemToRemove);\n        return _objectSpread({}, state, {\n          addedItems: new_items,\n          total: newTotal\n        });\n      }\n\n    case \"ADD_QUANTITY\":\n      {\n        // let addedItem = state.items.find(item=> item.id === action.id)\n        // addedItem.quantity += 1\n        // let newTotal = state.total + addedItem.price\n        // return{\n        //     ...state,\n        //     total: newTotal\n        // }\n        var _index = state.addedItems.findIndex(function (item) {\n          return action.id === item.id;\n        });\n\n        var _products2 = _toConsumableArray(state.items);\n\n        var _prodIndex = _products2.findIndex(function (item) {\n          return action.id === item.id;\n        });\n\n        _products2[_prodIndex].quantity -= 1;\n\n        if (_index !== -1) {\n          var _addedItemList = _toConsumableArray(state.addedItems);\n\n          var _addedItem = _addedItemList[_index];\n          _addedItem.quantity += 1;\n          return _objectSpread({}, state, {\n            items: _products2,\n            addedItems: _addedItemList,\n            total: state.total + _addedItem.price\n          });\n        }\n      }\n\n    case \"SUB_QUANTITY\":\n      {\n        var _index2 = state.addedItems.findIndex(function (item) {\n          return action.id === item.id;\n        });\n\n        var _products3 = _toConsumableArray(state.items);\n\n        var _prodIndex2 = _products3.findIndex(function (item) {\n          return action.id === item.id;\n        });\n\n        _products3[_prodIndex2].quantity += 1;\n\n        if (_index2 !== -1) {\n          var _addedItemList2 = _toConsumableArray(state.addedItems);\n\n          var _addedItem2 = _addedItemList2[_index2];\n          _addedItem2.quantity -= 1;\n          return _objectSpread({}, state, {\n            items: _products3,\n            addedItems: _addedItemList2,\n            total: state.total - _addedItem2.price\n          });\n        } else {\n          var _itemToRemove = state.addedItems.find(function (item) {\n            return action.id === item.id;\n          });\n\n          var _new_items = state.addedItems.filter(function (item) {\n            return action.id !== item.id;\n          }); //calculating the total\n\n\n          var _newTotal = state.total - _itemToRemove.price * _itemToRemove.quantity;\n\n          console.log(_itemToRemove);\n          return _objectSpread({}, state, {\n            addedItems: _new_items,\n            total: _newTotal\n          });\n        }\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["/home/ttn/Documents/shopping-cart-using-redux/src/components/reducer/cartReducer.js"],"names":["products","ADD_TO_CART","initstate","items","addedItems","total","cartReducer","state","action","type","index","findIndex","item","id","prodIndex","quantity","addedItemList","addedItem","price","newItemIndex","newItem","itemToRemove","find","new_items","filter","newTotal","console","log"],"mappings":"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","sourcesContent":["import products from \"../../data\";\nimport { ADD_TO_CART } from \"../action/cartAction\"\n\nconst initstate={\n    items:products,\n    addedItems:[],\n    total:0\n}\n\nconst cartReducer=(state=initstate,action)=>{\n    switch (action.type) {\n        case \"ADD_TO_CART\": {\n            //console.log(addedItem)\n            let index = state.addedItems.findIndex(item => action.id === item.id);\n            const products = [...state.items];\n            const prodIndex = products.findIndex(item => action.id === item.id);\n            products[prodIndex].quantity -= 1;\n            if (index !== -1) {\n                const addedItemList = [...state.addedItems];\n                const addedItem = addedItemList[index];\n                addedItem.quantity += 1;\n                return {\n                    ...state,\n                    items: products,\n                    addedItems: addedItemList,\n                    total: state.total + addedItem.price\n                };\n            } else {\n                let newItemIndex = state.items.findIndex(item => item.id === action.id);\n                if (newItemIndex !== -1) {\n                    let newItem = { ...state.items[newItemIndex] };\n                    newItem.quantity = 1;\n                    return {\n                        ...state,\n                        items: products,\n                        addedItems: [...state.addedItems, newItem],\n                        total: state.total + newItem.price\n                    };\n                }\n                return {\n                    ...state\n                };\n            }\n        }\n\n        //Cart\n        case \"REMOVE_ITEM\": {\n            let itemToRemove = state.addedItems.find(item => action.id === item.id);\n            let new_items = state.addedItems.filter(item => action.id !== item.id);\n\n            //calculating the total\n            let newTotal = state.total - itemToRemove.price * itemToRemove.quantity;\n            console.log(itemToRemove);\n            return {\n                ...state,\n                addedItems: new_items,\n                total: newTotal\n            };\n        }\n        case \"ADD_QUANTITY\": {\n            // let addedItem = state.items.find(item=> item.id === action.id)\n            // addedItem.quantity += 1\n            // let newTotal = state.total + addedItem.price\n            // return{\n            //     ...state,\n            //     total: newTotal\n            // }\n            let index = state.addedItems.findIndex(item => action.id === item.id);\n            const products = [...state.items];\n            const prodIndex = products.findIndex(item => action.id === item.id);\n            products[prodIndex].quantity -= 1;\n            if (index !== -1) {\n                const addedItemList = [...state.addedItems];\n                const addedItem = addedItemList[index];\n                addedItem.quantity += 1;\n                return {\n                    ...state,\n                    items: products,\n                    addedItems: addedItemList,\n                    total: state.total + addedItem.price\n                };\n            }\n        }\n        case \"SUB_QUANTITY\": {\n            let index = state.addedItems.findIndex(item => action.id === item.id);\n            const products = [...state.items];\n            const prodIndex = products.findIndex(item => action.id === item.id);\n            products[prodIndex].quantity += 1;\n            if (index !== -1) {\n                const addedItemList = [...state.addedItems];\n                const addedItem = addedItemList[index];\n                addedItem.quantity -= 1;\n                return {\n                    ...state,\n                    items: products,\n                    addedItems: addedItemList,\n                    total: state.total - addedItem.price\n                };\n            }\n            else{\n                let itemToRemove = state.addedItems.find(item => action.id === item.id);\n                let new_items = state.addedItems.filter(item => action.id !== item.id);\n\n                //calculating the total\n                let newTotal = state.total - itemToRemove.price * itemToRemove.quantity;\n                console.log(itemToRemove);\n                return {\n                    ...state,\n                    addedItems: new_items,\n                    total: newTotal\n                };\n            }\n        }\n\n        default: return state;\n\n    }\n}\n\nexport default cartReducer;"]},"metadata":{},"sourceType":"module"}